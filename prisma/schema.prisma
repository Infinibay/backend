generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["fullTextIndex"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        String  @id @default(uuid())
  eMail     String  @unique
  password  String
  deleted   Boolean
  token     String  @default("null")
  firstName String
  lastName  String
  userImage String? @unique
  userType  String
  disk         Disk[]
  ISO          ISO[]
  storage      Storage[]
  notification Notification[]

  VM VirtualMachine[]
}

model VirtualMachine {
  id                 String  @id @default(uuid())
  config             Json
  status             Boolean
  virtualMachineName String  @unique
  title              String
  description        String
  userId             String
  guId               String  @unique @default(uuid())
  vmImage            String? @unique

  user         User           @relation(fields: [userId], references: [id])
  notification Notification[]
   storage   Storage? @relation(fields: [storageId], references: [id])
  storageId String?
}

model Notification {
  id      String          @id @default(uuid())
  message String?
  userId  String
  readed  Boolean
  vmId    String?
  user    User            @relation(fields: [userId], references: [id])
  vm      VirtualMachine? @relation(fields: [vmId], references: [id])
}

model ISO {
  id        String   @id @default(uuid())
  name      String
  type      String
  size      Int
  createdAt DateTime @default(now())
  userId    String?
  user      User?    @relation(fields: [userId], references: [id])
}
model Storage {
  id          String           @id @default(uuid())
  storageName String
  storageType String
  storageSize Int
  userId      String?
  user        User?            @relation(fields: [userId], references: [id])
  disk        Disk[]
  VM          VirtualMachine[]
}

model Disk {
  id        String   @id @default(uuid())
  diskName  String
  diskSize  Int
  storageId String?
  userId    String?
  storage   Storage? @relation(fields: [storageId], references: [id])
  user      User?    @relation(fields: [userId], references: [id])
}